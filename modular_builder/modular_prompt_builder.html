<!DOCTYPE html>
<!-- ULTRA Dual Toggle Prompt Builder -->
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Modular Prompt Generator</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&family=IBM+Plex+Mono:wght@400;500;600&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg: #0a0b10;
      --bg2: #0e1020;
      --card: #0f1224;
      --stroke: #1f2444;
      --text: #e9ecff;
      --muted: #a7b0de;
      --accent: #6ef3ff;
      --accent2: #c46bff;
      --shadow: 0 12px 50px rgba(0,0,0,.55);
      --radius: 18px;
      --radius2: 28px;
    }

    * { box-sizing: border-box; }

    body {
      font-family: "Space Grotesk", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      margin: 0;
      padding: 20px;
      padding-bottom: 130px;
      background: 
        radial-gradient(1200px 800px at 10% 0%, rgba(110,243,255,.12), transparent 55%),
        radial-gradient(900px 700px at 90% 10%, rgba(196,107,255,.10), transparent 60%),
        linear-gradient(180deg, var(--bg), #070812 70%);
      color: var(--text);
      text-align: center;
      position: relative;
      overflow-x: hidden;
    }

    h1 {
      font-size: clamp(32px, 5vw, 48px);
      line-height: 1.1;
      margin: 0 0 20px;
      letter-spacing: -.02em;
      font-weight: 700;
      color: var(--text);
    }

    .project-info {
      color: var(--muted);
      font-size: 16px;
      margin: 10px 0 24px;
    }

    #sections {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      margin-bottom: 200px;
      max-width: 1200px;
      margin-left: auto;
      margin-right: auto;
      position: relative;
      gap: 14px;
    }

    .section {
      flex: 0 0 calc(24% - 14px);
      max-height: 170px;
      overflow-y: auto;
      background: rgba(15,18,36,.40);
      padding: 14px;
      box-sizing: border-box;
      border-radius: var(--radius);
      border: 1px solid rgba(31,36,68,.9);
      box-shadow: 0 18px 60px rgba(0,0,0,.22);
      position: relative;
    }

    .section::-webkit-scrollbar {
      width: 8px;
    }

    .section::-webkit-scrollbar-track {
      background: rgba(10,11,16,.3);
      border-radius: 4px;
    }

    .section::-webkit-scrollbar-thumb {
      background: rgba(110,243,255,.35);
      border-radius: 4px;
    }

    .section::-webkit-scrollbar-thumb:hover {
      background: rgba(110,243,255,.55);
    }

    .section h3 { 
      margin: 0 0 10px 0;
      font-size: 16px;
      font-weight: 600;
      color: var(--text);
    }

    .cat-toggle {
      display: block;
      text-align: left;
      margin-bottom: 6px;
      font-size: 13px;
      color: var(--muted);
    }

    .cat-toggle input[type="checkbox"] {
      margin-right: 6px;
      cursor: pointer;
    }

    .section input[type="text"] {
      width: 100%;
      margin-bottom: 8px;
      padding: 8px 10px;
      background: rgba(10,11,16,.35);
      color: var(--text);
      border: 1px solid rgba(31,36,68,.8);
      border-radius: 12px;
      font-family: inherit;
      font-size: 13px;
    }

    .section input[type="text"]:focus {
      outline: none;
      border-color: var(--accent);
      box-shadow: 0 0 0 2px rgba(110,243,255,.15);
    }

    ul { 
      list-style: none; 
      padding: 0; 
      margin: 0;
    }

    li {
      background: rgba(10,11,16,.25);
      margin: 6px 0;
      padding: 8px 10px;
      cursor: pointer;
      border-radius: 10px;
      border: 1px solid rgba(31,36,68,.6);
      transition: all 0.2s ease;
      font-size: 13px;
      line-height: 1.4;
    }

    li:hover { 
      background: rgba(15,18,36,.45);
      border-color: rgba(110,243,255,.4);
      transform: translateX(2px);
    }
    
    li.selected {
      background: linear-gradient(90deg, rgba(110,243,255,.15), rgba(196,107,255,.10));
      border: 1px solid rgba(110,243,255,.5);
      color: var(--text);
      font-weight: 500;
    }

    .footer {
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
      background: rgba(10,11,16,.75);
      backdrop-filter: blur(14px);
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 10px;
      padding: 14px 0;
      border-top: 1px solid rgba(31,36,68,.65);
      z-index: 1001;
      box-shadow: 0 -10px 40px rgba(0,0,0,.35);
    }

    #promptBox {
      width: 90%;
      height: 80px;
      margin: 0;
      background: rgba(15,18,36,.5);
      border: 1px solid rgba(31,36,68,.85);
      border-radius: 14px;
      color: var(--text);
      font-family: "IBM Plex Mono", ui-monospace, monospace;
      font-size: 13px;
      padding: 10px 12px;
      box-shadow: inset 0 2px 8px rgba(0,0,0,.25);
      resize: none;
    }

    #promptBox:focus {
      outline: none;
      border-color: var(--accent);
      box-shadow: 0 0 0 2px rgba(110,243,255,.15), inset 0 2px 8px rgba(0,0,0,.25);
    }

    .toggles { 
      margin-bottom: 24px; 
      position: relative;
      display: flex;
      gap: 20px;
      justify-content: center;
    }
    
    .toggle-container {
      position: relative;
    }
    
    .toggle-switch {
      width: 140px;
      height: 40px;
      background: rgba(15,18,36,.45);
      border: 1px solid rgba(31,36,68,.9);
      border-radius: 999px;
      position: relative;
      cursor: pointer;
      overflow: hidden;
      transition: all 0.3s ease;
      box-shadow: 0 4px 12px rgba(0,0,0,.15);
    }
    
    .toggle-switch:hover {
      border-color: rgba(110,243,255,.45);
      box-shadow: 0 6px 16px rgba(0,0,0,.25);
    }
    
    .toggle-slider {
      width: 60px;
      height: 32px;
      background: linear-gradient(135deg, rgba(110,243,255,.5), rgba(196,107,255,.4));
      border-radius: 999px;
      position: absolute;
      top: 3px;
      left: 4px;
      transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
      box-shadow: 0 4px 12px rgba(110,243,255,.35);
    }
    
    .toggle-switch.active .toggle-slider {
      left: 72px;
      background: linear-gradient(135deg, rgba(196,107,255,.5), rgba(110,243,255,.4));
      box-shadow: 0 4px 12px rgba(196,107,255,.35);
    }
    
    .toggle-label-left, .toggle-label-right {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      font-weight: 600;
      font-size: 12px;
      transition: all 0.3s ease;
      pointer-events: none;
    }
    
    .toggle-label-left {
      left: 12px;
      color: var(--text);
    }
    
    .toggle-label-right {
      right: 12px;
      color: var(--muted);
    }
    
    .toggle-switch.active .toggle-label-left {
      color: var(--muted);
    }
    
    .toggle-switch.active .toggle-label-right {
      color: var(--text);
    }

    button {
      margin: 0 6px;
      padding: 10px 16px;
      font-size: 14px;
      font-weight: 600;
      background: linear-gradient(90deg, rgba(110,243,255,.20), rgba(196,107,255,.14));
      color: var(--text);
      border: 1px solid rgba(110,243,255,.38);
      border-radius: 999px;
      cursor: pointer;
      position: relative;
      overflow: hidden;
      transition: all 0.2s ease;
      box-shadow: 0 10px 30px rgba(0,0,0,.22);
      font-family: inherit;
    }

    button:hover { 
      background: linear-gradient(90deg, rgba(110,243,255,.30), rgba(196,107,255,.24));
      border-color: rgba(110,243,255,.55);
      transform: translateY(-1px);
      box-shadow: 0 12px 35px rgba(0,0,0,.3);
    }

    button:active {
      transform: translateY(0);
      box-shadow: 0 8px 25px rgba(0,0,0,.25);
    }

    button.btn--ghost {
      background: rgba(15,18,36,.35);
      border: 1px solid rgba(31,36,68,.9);
      box-shadow: none;
    }

    button.btn--ghost:hover {
      background: rgba(15,18,36,.55);
      border-color: rgba(31,36,68,1);
    }

    button.btn--danger {
      background: linear-gradient(90deg, rgba(255,64,128,.25), rgba(255,0,64,.20));
      border-color: rgba(255,64,128,.5);
    }

    button.btn--danger:hover {
      background: linear-gradient(90deg, rgba(255,64,128,.35), rgba(255,0,64,.30));
      border-color: rgba(255,64,128,.7);
    }

    .footer-input-group {
      margin-bottom: 12px;
      text-align: left;
    }

    .footer-input-group label {
      display: block;
      margin-bottom: 6px;
      font-weight: 600;
      font-size: 13px;
      color: var(--text);
    }

    .footer-input-group input[type="text"] {
      width: 100%;
      padding: 10px 12px;
      background: rgba(15,18,36,.5);
      color: var(--text);
      border: 1px solid rgba(31,36,68,.85);
      border-radius: 12px;
      box-sizing: border-box;
      font-family: "IBM Plex Mono", monospace;
      font-size: 13px;
    }

    .footer-input-group input[type="text"]:focus {
      outline: none;
      border-color: var(--accent);
      box-shadow: 0 0 0 2px rgba(110,243,255,.15);
    }

    .combinations-display {
      margin-bottom: 12px;
      padding: 12px;
      background: linear-gradient(90deg, rgba(110,243,255,.08), rgba(196,107,255,.06));
      border: 1px solid rgba(110,243,255,.25);
      border-radius: 14px;
      text-align: center;
    }

    .combinations-display .label {
      font-weight: 600;
      color: var(--accent);
      margin-right: 8px;
    }

    .combinations-display .count {
      font-size: 1.3em;
      font-weight: 700;
      color: var(--text);
      font-family: "IBM Plex Mono", monospace;
    }

    .preset-controls {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      align-items: center;
      margin-bottom: 14px;
      padding: 14px;
      background: rgba(10,11,16,.35);
      border: 1px solid rgba(31,36,68,.7);
      border-radius: 14px;
    }

    .preset-controls label {
      font-size: 13px;
      font-weight: 600;
      color: var(--muted);
      margin: 0 6px 0 12px;
    }

    .preset-controls select {
      flex: 1;
      min-width: 200px;
      padding: 8px 12px;
      background: rgba(15,18,36,.5);
      color: var(--text);
      border: 1px solid rgba(31,36,68,.85);
      border-radius: 999px;
      font-family: inherit;
      font-size: 13px;
      cursor: pointer;
    }

    .preset-controls select:focus {
      outline: none;
      border-color: var(--accent);
      box-shadow: 0 0 0 2px rgba(110,243,255,.15);
    }

    .button-group {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
      justify-content: center;
    }

    .mono {
      font-family: "IBM Plex Mono", ui-monospace, monospace;
    }

    @media (max-width: 920px) {
    select[id^="category-"] {
      width: 100% !important;
      margin-bottom: 8px !important;
      background: rgba(10,11,16,.35) !important;
      color: var(--text) !important;
      border: 1px solid rgba(31,36,68,.8) !important;
      border-radius: 12px !important;
      padding: 8px 12px !important;
      font-size: 13px !important;
      font-weight: 500 !important;
      min-height: 32px !important;
      box-sizing: border-box !important;
      cursor: pointer !important;
      transition: all 0.2s ease !important;
      font-family: inherit !important;
    }

    select[id^="category-"]:hover {
      background: rgba(15,18,36,.45) !important;
      border-color: rgba(110,243,255,.4) !important;
    }

    select[id^="category-"]:focus {
      outline: none !important;
      background: rgba(15,18,36,.45) !important;
      border-color: var(--accent) !important;
      box-shadow: 0 0 0 2px rgba(110,243,255,.15) !important;
    }

    /* Make dropdown options more readable */
    select[id^="category-"] option {
      background: var(--card) !important;
      color: var(--text) !important;
      padding: 8px !important;
      font-size: 13px !important;
    }

    .mono {
      font-family: "IBM Plex Mono", ui-monospace, monospace;
    }

    @media (max-width: 920px) {
      .section {
        flex: 0 0 calc(50% - 14px);
      }
    }

    @media (max-width: 600px) {
      .section {
        flex: 0 0 100%;
      }
      
      .toggles {
        flex-direction: column;
        align-items: center;
      }
    }
  </style>
</head>
<body>

<h1>Modular Prompt Generator</h1>
<div class="project-info">
  <p>üîß Modular CSV-Based Categories | üîí Lock System | üì¶ Batch Generation</p>
</div>
<div id="sections">

<!-- Body Type -->
<div class="section" id="bodytype">
  <h3 id="label-bodytype">Body Type</h3>
  <label class="cat-toggle"><input type="checkbox" id="enable-bodytype" checked onchange="updateCombinationsCount()"> include</label>
  <label class="cat-toggle"><input type="checkbox" id="lock-bodytype"> üîí lock</label>
  <select id="category-bodytype" onchange="loadCategory('bodytype', this.value)"><option value="default">Current (Default)</option></select>
  <input type="text" value="Body Type" oninput="updateLabel('bodytype', this.value)">
<ul>
    <li onclick="pick('bodytype', this)">petite frame and delicate features, small breasts</li>
    <li onclick="pick('bodytype', this)">wide hips, perfect ass, small breasts</li>
    <li onclick="pick('bodytype', this)">busty with large breasts and curvy hips</li>
    <li onclick="pick('bodytype', this)">athletic with perky breasts, toned ass</li>
    <li onclick="pick('bodytype', this)">curvy with full breasts and wide hips</li>
    <li onclick="pick('bodytype', this)">mom bod with soft curves and nurturing presence</li>
    <li onclick="pick('bodytype', this)">petite with a small frame, perky breasts, and a cute butt</li>
    <li onclick="pick('bodytype', this)">body of a college centrefold</li>
    <li onclick="pick('bodytype', this)">freckled, slim and petite with firm medium breasts</li>
    <li onclick="pick('bodytype', this)">a softer fuller figure, large breasts, round belly</li>
    <li onclick="pick('bodytype', this)">tall and slender with long legs, small breasts</li>
    <li onclick="pick('bodytype', this)">slim with a flat stomach, small breasts</li>
    <li onclick="pick('bodytype', this)">voluptuous with a curvy figure, large breasts, and wide hips</li>
    <li onclick="pick('bodytype', this)">average build with a healthy figure, medium breasts</li>
    <li onclick="pick('bodytype', this)">muscular with toned arms and legs, strong physique, defined abs, fake breasts</li>
    <li onclick="pick('bodytype', this)">petite with a small frame, perky breasts, and a cute butt</li>
    <li onclick="pick('bodytype', this)">slender with a delicate frame, small breasts, and a graceful posture</li>
    <li onclick="pick('bodytype', this)">curvy with a voluptuous figure, large breasts, and a round butt</li>
    <li onclick="pick('bodytype', this)">athletic with a toned physique, firm breasts, and a strong core</li>
    <li onclick="pick('bodytype', this)">slim with a lean build, small breasts, and a flat stomach</li>
    <li onclick="pick('bodytype', this)">full-figured with a soft body, large breasts, and wide hips</li>
    <li onclick="pick('bodytype', this)">tall and statuesque with long legs, medium breasts, and a confident stance</li>
    <li onclick="pick('bodytype', this)">petite and delicate with small breasts, a narrow waist, and a cute butt</li>
    <li onclick="pick('bodytype', this)">muscular and defined with toned arms and legs, strong abs, and fake breasts</li>
    <li onclick="pick('bodytype', this)">slender and graceful with a small frame, perky breasts, and a poised demeanor</li>
    <li onclick="pick('bodytype', this)">curvy and voluptuous with large breasts, wide hips, and a round butt</li>
    <li onclick="pick('bodytype', this)">athletic and fit with a toned physique, firm breasts, and a strong core</li>
    <li onclick="pick('bodytype', this)">slim and lean with a flat stomach, small breasts, and a healthy glow</li>
    <li onclick="pick('bodytype', this)">full-figured and soft with large breasts, wide hips, and a warm smile</li>
    <li onclick="pick('bodytype', this)">tall and elegant with long legs, medium breasts, and a graceful posture</li>
    <li onclick="pick('bodytype', this)">petite and charming with small breasts, a narrow waist, and a playful attitude</li>
    <li onclick="pick('bodytype', this)">muscular and strong with toned arms and legs, defined abs, and fake breasts</li>
    <li onclick="pick('bodytype', this)">slender and delicate with a small frame, perky breasts, and a refined demeanor</li>
    <li onclick="pick('bodytype', this)">curvy and alluring with large breasts, wide hips, and a seductive smile</li>
    <li onclick="pick('bodytype', this)">athletic and agile with a toned physique, firm breasts, and a confident stance</li>
    <li onclick="pick('bodytype', this)">slim and graceful with a flat stomach, small breasts, and a radiant glow</li>
  </ul>
</div>

<!-- Scene -->
<div class="section" id="scene">
  <h3 id="label-scene">Scene</h3>
  <label class="cat-toggle"><input type="checkbox" id="enable-scene" checked onchange="updateCombinationsCount()"> include</label>
  <label class="cat-toggle"><input type="checkbox" id="lock-scene"> üîí lock</label>
  <select id="category-scene" onchange="loadCategory('scene', this.value)"><option value="default">Current (Default)</option></select>
  <input type="text" value="Scene" oninput="updateLabel('scene', this.value)">
<ul>
  <li onclick="pick('scene', this)">leaning against rusted doorway, pistol hanging loose, rain dripping off chin</li>
  <li onclick="pick('scene', this)">standing atop crumbling overpass, cityscape ablaze behind, wind tugging at coat</li>
  <li onclick="pick('scene', this)">perched on ledge, overlooking neon-lit streets, expression contemplative</li>
  <li onclick="pick('scene', this)">crouched in shadows, watching as figures pass, heart racing</li>
  <li onclick="pick('scene', this)">huddled beneath flickering sign, rain-soaked and shivering</li>
  <li onclick="pick('scene', this)">leaning against crumbling wall, eyes scanning the street for threats</li>
  <li onclick="pick('scene', this)">standing on rooftop edge, neon city sprawling below, wind tugging at coat</li
  <li onclick="pick('scene', this)">huddled beneath flickering sign, rain-soaked and shivering</li>
  <li onclick="pick('scene', this)">crouched behind abandoned vehicle, heart pounding, breath held</li>
  <li onclick="pick('scene', this)">kneeling beside wrecked android, cigarette glowing in the dark</li>
  <li onclick="pick('scene', this)">standing in flooded street ankle-deep, neon light cutting through the mist</li>
  <li onclick="pick('scene', this)">sitting on cracked marble statue, one hand bandaged, city burning behind</li>
  <li onclick="pick('scene', this)">walking through empty market, flickering signs dying as she passes</li>
  <li onclick="pick('scene', this)">lying on rain-slick roof, plasma scar glowing faintly under ribs</li>
  <li onclick="pick('scene', this)">crouched near shattered mirror, reflection split across a dozen shards</li>
  <li onclick="pick('scene', this)">arms outstretched under acid rain, eyes closed, blood washing from hands</li>
  <li onclick="pick('scene', this)">one knee on the ground, weapon dropped, expression unreadable</li>
  <li onclick="pick('scene', this)">backlit by explosion, hair whipping forward, calm amid chaos</li>
  <li onclick="pick('scene', this)">slumped in neon alley corner, cigarette ember the only light</li>
  <li onclick="pick('scene', this)">reaching toward broken camera lens, glass reflecting her eye</li>
  <li onclick="pick('scene', this)">sitting cross-legged on cracked highway, neon sign flickering behind</li>
  <li onclick="pick('scene', this)">kneeling at water's edge, neon skyline dissolving into reflection</li>
  <li onclick="pick('scene', this)">standing over fallen figure, smoke curling from gun barrel</li>
</ul>
</div>

<!-- Outfit -->
<div class="section" id="outfit">
  <h3 id="label-outfit">Outfit</h3>
  <label class="cat-toggle"><input type="checkbox" id="enable-outfit" checked onchange="updateCombinationsCount()"> include</label>
  <label class="cat-toggle"><input type="checkbox" id="lock-outfit"> üîí lock</label>
  <select id="category-outfit" onchange="loadCategory('outfit', this.value)"><option value="default">Current (Cyberpunk)</option></select>
  <input type="text" value="Outfit" oninput="updateLabel('outfit', this.value)">
<ul>
  <li onclick="pick('outfit', this)">black synth-leather bodysuit, high collar, zippers frayed, faint blood spray on sleeve</li>
  <li onclick="pick('outfit', this)">tactical harness over torn undershirt, carbon fiber plates, exposed skin streaked with grime</li>
  <li onclick="pick('outfit', this)">chrome-lined trenchcoat, scorched hem, glowing circuitry under seams</li>
  <li onclick="pick('outfit', this)">mesh crop top under cracked ballistic vest, acid stains and ash smudges</li>
  <li onclick="pick('outfit', this)">tattered hooded cloak, edges singed, pockets filled with scavenged tech</li>
  <li onclick="pick('outfit', this)">fingerless gloves, reinforced knuckles, frayed edges</li>
  <li onclick="pick('outfit', this)">combat boots, scuffed and worn, steel toes glinting</li>
  <li onclick="pick('outfit', this)">utility belt loaded with pouches, tools, and a sidearm</li>
  <li onclick="pick('outfit', this)">dark cargo pants, multiple pockets, knee pads scratched and dented</li>
  <li onclick="pick('outfit', this)">sleek visor with HUD display, cracked on one side, faint blood splatter</li>
  <li onclick="pick('outfit', this)">armored gloves with exposed fingertips, smudged with oil and dirt</li>
  <li onclick="pick('outfit', this)">high-tech wrist gauntlet, cracked screen, blinking red light</li>
  <li onclick="pick('outfit', this)">stealth suit with adaptive camohing, seams worn thin, dirt smudges</li>
  <li onclick="pick('outfit', this)">industrial latex catsuit patched with duct tape, old serial number across thigh</li>
  <li onclick="pick('outfit', this)">asymmetrical leather jacket, collar wired with blue neon filament, knife sheathed at ribs</li>
  <li onclick="pick('outfit', this)">torn nylon bodystocking beneath armored corset, blood dried along laces</li>
  <li onclick="pick('outfit', this)">oversized bomber jacket, reflective logo faded, bullet holes stitched shut</li>
  <li onclick="pick('outfit', this)">carbon-fiber exosuit frame with missing plates, power lines trailing sparks</li>
  <li onclick="pick('outfit', this)">black vinyl coat unbuttoned to waist, chains looping from belt, rainwater streaked with oil</li>
  <li onclick="pick('outfit', this)">ragged synthsilk skirt torn at knee, gunmetal garters, glowing cuffs at wrists</li>
  <li onclick="pick('outfit', this)">biohazard rain poncho transparent and slick, smeared with crimson fingerprints</li>
  <li onclick="pick('outfit', this)">neon harness wrapped across chest and arms, skin painted with industrial grease</li>
  <li onclick="pick('outfit', this)">urban scavenger rags layered over combat leggings, wires braided through belt</li>
  <li onclick="pick('outfit', this)">street samurai bodysuit, matte finish with scorched panels, dried blood at throat seam</li>
</ul>
</div>

<!-- Visual FX -->
<div class="section" id="visualfx">
  <h3 id="label-visualfx">Visual FX</h3>
  <label class="cat-toggle"><input type="checkbox" id="enable-visualfx" checked onchange="updateCombinationsCount()"> include</label>
  <label class="cat-toggle"><input type="checkbox" id="lock-visualfx"> üîí lock</label>
  <select id="category-visualfx" onchange="loadCategory('visualfx', this.value)"><option value="default">Current (Cyberpunk)</option></select>
  <input type="text" value="Visual FX" oninput="updateLabel('visualfx', this.value)">
<ul>
  <li onclick="pick('visualfx', this)">rain streaking across lens, neon reflections breaking through smoke</li>
  <li onclick="pick('visualfx', this)">flickering sign light casting stuttered shadows across wet pavement</li>
  <li onclick="pick('visualfx', this)">glitching holograms flickering in and out of existence</li>
  <li onclick="pick('visualfx', this)">static distortion across the frame, momentary loss of detail</li>
  <li onclick="pick('visualfx', this)">digital rain cascading down the screen, pixelated edges</li>
  <li onclick="pick('visualfx', this)">holographic glitches warping the environment, reality bending</li>
  <li onclick="pick('visualfx', this)">data moshing effect, colors bleeding into each other</li>
  <li onclick="pick('visualfx', this)">chromatic aberration fringing around bright lights</li>
  <li onclick="pick('visualfx', this)">neon light trails following movement, long exposure effect</li>
  <li onclick="pick('visualfx', this)">rain droplets on lens, distorting neon reflections</li>
  <li onclick="pick('visualfx', this)">lens distortion creating a fisheye effect</li>
  <li onclick="pick('visualfx', this)">holographic static flickering over the image, like a broken projection</li>
  <li onclick="pick('visualfx', this)">light diffusion through fog, soft glow around neon signs</li>
  <li onclick="pick('visualfx', this)">high-contrast spotlight cutting through steam, edges haloed in haze</li>
  <li onclick="pick('visualfx', this)">sodium streetlight glow bleeding into cool blue shadows</li>
  <li onclick="pick('visualfx', this)">digital static overlay, corrupted feed, faint scanline drift</li>
  <li onclick="pick('visualfx', this)">sparks raining from overhead cable, slow-motion capture</li>
  <li onclick="pick('visualfx', this)">infrared haze and lens flares washing across frame</li>
  <li onclick="pick('visualfx', this)">acid-green underglow mixing with violet reflections</li>
  <li onclick="pick('visualfx', this)">harsh interrogation light, overexposed edges, face in silhouette</li>
  <li onclick="pick('visualfx', this)">light leaking through cracked glass, red bloom flaring like a wound</li>
  <li onclick="pick('visualfx', this)">faint electrical arcs crawling along metallic surfaces</li>
  <li onclick="pick('visualfx', this)">camera flare from siren lights, rain creating prismatic halos</li>
  <li onclick="pick('visualfx', this)">dust motes drifting through beam of emergency light</li>
  <li onclick="pick('visualfx', this)">shutter flicker effect, one frame missing every heartbeat</li>
  <li onclick="pick('visualfx', this)">neon reflections rippling in oily water, distorted and alive</li>
</ul>
</div>

<!-- Art Reference -->
<div class="section" id="artreference">
  <h3 id="label-artreference">Art/Esthetic/Artist Reference</h3>
  <label class="cat-toggle"><input type="checkbox" id="enable-artreference" checked onchange="updateCombinationsCount()"> include</label>
  <label class="cat-toggle"><input type="checkbox" id="lock-artreference"> üîí lock</label>
  <select id="category-artreference" onchange="loadCategory('artreference', this.value)"><option value="default">Current (Mixed Artists)</option></select>
  <input type="text" value="Art Reference" oninput="updateLabel('artreference', this.value)">
<ul>
  <li onclick="pick('artreference', this)">inspired by Ridley Scott's Blade Runner cinematography, wet neon realism</li>
  <li onclick="pick('artreference', this)">in the style of Katsuhiro Otomo's Akira, chaotic urban sprawl and vibrant decay</li>
  <li onclick="pick('artreference', this)">influenced by Masamune Shirow's Ghost in the Shell, cybernetic enhancement and existential themes</li>
  <li onclick="pick('artreference', this)">inspired by the works of H.R. Giger, biomechanical surrealism and dark eroticism</li>
  <li onclick="pick('artreference', this)">in the style of Hayao Miyazaki, whimsical yet haunting landscapes</li>
  <li onclick="pick('artreference', this)">influenced by the visual language of Jean-Pierre Jeunet, intricate details and surreal storytelling</li>
  <li onclick="pick('artreference', this)">inspired by the works of Satoshi Kon, blending reality and dreams</li>
  <li onclick="pick('artreference', this)">in the style of Karan Singh's neon-drenched cyberpunk art, vibrant colors and dynamic compositions</li>
  <li onclick="pick('artreference', this)">influenced by the visual style of Shinkai Makoto, breathtaking landscapes and emotional depth</li>
  <li onclick="pick('artreference', this)">inspired by the works of Katsuhiro Otomo, intricate details and surreal storytelling</li>
  <li onclick="pick('artreference', this)">influenced by the visual style of Shinkai Makoto, breathtaking landscapes and emotional depth</li>
  <li onclick="pick('artreference', this)">inspired by the works of Denis Villeneuve, sci-fi minimalism, smoke, silhouettes, sensory overload</li>
  <li onclick="pick('artreference', this)">Denis Villeneuve sci-fi minimalism, smoke, silhouettes, sensory overload</li>
  <li onclick="pick('artreference', this)">Gregory Crewdson-style cinematic despair, every frame a crime scene</li>
  <li onclick="pick('artreference', this)">Pascal Blanch√© palette muted by industrial gray and sickly green light</li>
  <li onclick="pick('artreference', this)">David Fincher visual tone‚Äîhigh contrast, controlled chaos, grime on precision</li>
  <li onclick="pick('artreference', this)">80s Japanese cyberpunk poster art, chrome reflections and acid magenta</li>
  <li onclick="pick('artreference', this)">Moebius line weight and emptiness filtered through dystopian sorrow</li>
  <li onclick="pick('artreference', this)">Matte-painted skyline haze, ruined city glow, Tarkovsky-like melancholy</li>
  <li onclick="pick('artreference', this)">retro VHS horror aesthetic, flickering distortion, low dynamic range</li>
  <li onclick="pick('artreference', this)">oil-painted sci-fi realism, dirty color blending and soft bleed highlights</li>
  <li onclick="pick('artreference', this)">pulp illustration grit mixed with modern lens bloom and chromatic aberration</li>
  <li onclick="pick('artreference', this)">industrial surrealism, brutalist geometry, thin neon veins across concrete</li>
  <li onclick="pick('artreference', this)">graphic-novel noir lighting, cinematic backdrops soaked in despair</li>
  <li onclick="pick('artreference', this)">photoreal still life in a dying city, reflections warped by pollution</li>
  <li onclick="pick('artreference', this)">Syd Mead's optimistic futurism turned rotten, designs collapsing under rust</li>
</ul>
</div>


<!-- Setting -->
<div class="section" id="setting">
  <h3 id="label-setting">Setting</h3>
  <label class="cat-toggle"><input type="checkbox" id="enable-setting" checked onchange="updateCombinationsCount()"> include</label>
  <label class="cat-toggle"><input type="checkbox" id="lock-setting"> üîí lock</label>
  <select id="category-setting" onchange="loadCategory('setting', this.value)"><option value="default">Current (Cyberpunk)</option></select>
  <input type="text" value="Setting" oninput="updateLabel('setting', this.value)">
<ul>
  <li onclick="pick('setting', this)">abandoned megacity street flooded waist-deep, neon signs reflected in chemical rain</li>
  <li onclick="pick('setting', this)">collapsed subway tunnel glowing with red emergency strobes, static humming in the dark</li>
  <li onclick="pick('setting', this)">industrial wasteland outside city walls, wind turbines toppled and burning</li>
  <li onclick="pick('setting', this)">rooftop market built from scavenged drones, smoke curling from oil drums</li>
  <li onclick="pick('setting', this)">abandoned subway station, walls covered in bioluminescent moss</li>
  <li onclick="pick('setting', this)">overgrown park reclaiming a corporate plaza, rusting sculptures half-buried in foliage</li>
  <li onclick="pick('setting', this)">neon-lit back-alley bazaar, stalls overflowing with hacked cyberware and black-market tech</li>
  <li onclick="pick('setting', this)">dilapidated high-rise rooftop, wind whipping through broken antennas</li>
  <li onclick="pick('setting', this)">forgotten industrial complex, conveyor belts frozen in time, dust motes in stray light beams</li>
  <li onclick="pick('setting', this)">derelict spaceport terminal, flickering holo-ads and abandoned luggage carts</li>
  <li onclick="pick('setting', this)">crumbling highway overpass, vines creeping through the concrete</li>
  <li onclick="pick('setting', this)">abandoned shopping mall, escalators frozen mid-descent, graffiti covering the walls</li>
  <li onclick="pick('setting', this)">fog-shrouded industrial docks, rusting cranes silhouetted against dim city lights</li>
  <li onclick="pick('setting', this)">neon-bathed street corner, rain slick pavement reflecting flickering signs</li>
  <li onclick="pick('setting', this)">abandoned subway entrance, flickering lights casting long shadows</li>
  <li onclick="pick('setting', this)">derelict corporate tower, shattered glass hallways, elevator music looping</li>
  <li onclick="pick('setting', this)">cyber-slum alley slick with rain and blood, flicker of a vending-machine shrine</li>
  <li onclick="pick('setting', this)">underground fight club lit by faulty holograms, crowd chanting over feedback</li>
  <li onclick="pick('setting', this)">bridge checkpoint guarded by half-awake drones, graffiti glowing like prayer marks</li>
  <li onclick="pick('setting', this)">burned-out nightclub still pulsing faint bass, mannequins melted to bar stools</li>
  <li onclick="pick('setting', this)">train graveyard at dawn, magnetic dust rising in cold fog</li>
  <li onclick="pick('setting', this)">data-farm catacombs beneath the city, coolant mist and whispering servers</li>
  <li onclick="pick('setting', this)">junkyard cathedral of broken satellites, lightning crawling along their frames</li>
  <li onclick="pick('setting', this)">hollowed freeway interchange turned refugee camp, floodlights shaking on cables</li>
  <li onclick="pick('setting', this)">chemical plant ruins, puddles glowing toxic green under drones' searchlights</li>
  <li onclick="pick('setting', this)">warehouse district blackout, only a single crimson hologram pulsing alive</li>
</ul>
</div>

<!-- Mood -->
<div class="section" id="mood">
  <h3 id="label-mood">Mood</h3>
  <label class="cat-toggle"><input type="checkbox" id="enable-mood" checked onchange="updateCombinationsCount()"> include</label>
  <label class="cat-toggle"><input type="checkbox" id="lock-mood"> üîí lock</label>
  <select id="category-mood" onchange="loadCategory('mood', this.value)"><option value="default">Current (Cyberpunk)</option></select>
  <input type="text" value="Mood" oninput="updateLabel('mood', this.value)">
<ul>
  <li onclick="pick('mood', this)">permanent midnight sky, electric fog drifting between monoliths</li>
  <li onclick="pick('mood', this)">burnt ozone scent in the air, light pollution drowning the stars</li>
  <li onclick="pick('mood', this)">quiet dread under humming streetlights, puddles reflecting firelight</li>
  <li onclick="pick('mood', this)">rain never stops, like the city is trying to wash itself clean and failing</li>
  <li onclick="pick('mood', this)">distant sirens buried beneath the pulse of synthetic bass</li>
  <li onclick="pick('mood', this)">flickering neon signs casting erratic shadows</li>
  <li onclick="pick('mood', this)">humming power lines overhead, a low drone in the background</li>
  <li onclick="pick('mood', this)">distant explosions echoing through the streets</li>
  <li onclick="pick('mood', this)">flickering streetlights casting long shadows</li>
  <li onclick="pick('mood', this)">abandoned buildings looming like tombstones</li>
  <li onclick="pick('mood', this)">crumbling highway overpass, vines creeping through the concrete</li>
  <li onclick="pick('mood', this)">flickering streetlights casting long shadows</li>
  <li onclick="pick('mood', this)">abandoned subway entrance, flickering lights casting long shadows</li>
  <li onclick="pick('mood', this)">distant thunder rolling over steel and glass, rain pattering like static</li>
  <li onclick="pick('mood', this)">neon haze blurring the edges of reality, everything dripping wet and glowing</li>
  <li onclick="pick('mood', this)">smog thick enough to taste, ghosts of laughter from broken billboards</li>
  <li onclick="pick('mood', this)">neon flicker spasming across blood-slick glass</li>
  <li onclick="pick('mood', this)">air vibrating with tension, drones circling like vultures</li>
  <li onclick="pick('mood', this)">everything damp, metallic, alive but barely breathing</li>
  <li onclick="pick('mood', this)">heartbeat of the city synced with a failing reactor's rhythm</li>
  <li onclick="pick('mood', this)">the world smells of oil, rust, and adrenaline</li>
  <li onclick="pick('mood', this)">silence so dense it feels radioactive</li>
  <li onclick="pick('mood', this)">paranoia baked into the rain, hope outlawed long ago</li>
  <li onclick="pick('mood', this)">screens whispering propaganda to no one left alive</li>
  <li onclick="pick('mood', this)">cold beauty in the ruin, everything broken but still trying to shine</li>
</ul>
</div>

<!-- Accessories -->
<div class="section" id="accessories">
  <h3 id="label-accessories">Accessories</h3>
  <label class="cat-toggle"><input type="checkbox" id="enable-accessories" checked onchange="updateCombinationsCount()"> include</label>
  <label class="cat-toggle"><input type="checkbox" id="lock-accessories"> üîí lock</label>
  <select id="category-accessories" onchange="loadCategory('accessories', this.value)"><option value="default">Current (Cyberpunk)</option></select>
  <input type="text" value="Accessories" oninput="updateLabel('accessories', this.value)">
<ul>
  <li onclick="pick('accessories', this)">rusted cybernetic arm grafted with surgical staples, flickering LEDs under skin</li>
  <li onclick="pick('accessories', this)">neon respirator mask, condensation pooling behind tinted visor</li>
  <li onclick="pick('accessories', this)">tattered hooded cloak, pockets filled with scavenged tech</li>
  <li onclick="pick('accessories', this)">fingerless gloves with embedded circuitry, worn and frayed</li>
  <li onclick="pick('accessories', this)">utility jumpsuit with reinforced stitching and hidden pockets</li>
  <li onclick="pick('accessories', this)">combat boots with steel toes and hidden compartments</li>
  <li onclick="pick('accessories', this)">hacked wrist console with cracked screen and flickering holograms</li>
  <li onclick="pick('accessories', this)">chrome-plated cybernetic eye with glowing red iris</li>
  <li onclick="pick('accessories', this)">datajack port embedded in neck, scar tissue visible</li>
  <li onclick="pick('accessories', this)">subdermal armor plating, barely visible under the skin</li>
  <li onclick="pick('accessories', this)">modular backpack with detachable drone and tool kit</li>
  <li onclick="pick('accessories', this)">stealth cloak woven from light-bending fibers, edges frayed</li>
  <li onclick="pick('accessories', this)">utility belt stacked with expired med-packs and stolen data drives</li>
  <li onclick="pick('accessories', this)">broken wrist console looping static and heart-rate monitor</li>
  <li onclick="pick('accessories', this)">chipped visor goggles, HUD flickering between life and death</li>
  <li onclick="pick('accessories', this)">hacked neural uplink glowing faintly at the base of the skull</li>
  <li onclick="pick('accessories', this)">blood-smeared combat gloves with retractable carbon blades</li>
  <li onclick="pick('accessories', this)">burned ID badge hanging from neck, edges melted</li>
  <li onclick="pick('accessories', this)">radiation detector reassembled from children's toys and scrap</li>
  <li onclick="pick('accessories', this)">microdrone companion the size of a fist, patched with duct tape and hope</li>
  <li onclick="pick('accessories', this)">syringe gun for adrenaline shots, clipped to thigh harness</li>
  <li onclick="pick('accessories', this)">black-market cyberware case engraved with teeth marks</li>
  <li onclick="pick('accessories', this)">handmade necklace of processor chips and broken dog tags</li>
  <li onclick="pick('accessories', this)">holo-cigarette that projects dying memories when exhaled</li>
  <li onclick="pick('accessories', this)">laser scalpel disguised as lipstick, faint heat shimmer at tip</li>
</ul>
</div>

<!-- Hair & Makeup -->
<div class="section" id="hairmakeup">
  <h3 id="label-hairmakeup">Hair & Makeup</h3>
  <label class="cat-toggle"><input type="checkbox" id="enable-hairmakeup" checked onchange="updateCombinationsCount()"> include</label>
  <label class="cat-toggle"><input type="checkbox" id="lock-hairmakeup"> üîí lock</label>
  <select id="category-hairmakeup" onchange="loadCategory('hairmakeup', this.value)"><option value="default">Current (Cyberpunk)</option></select>
  <input type="text" value="Hair & Makeup" oninput="updateLabel('hairmakeup', this.value)">
<ul>
  <li onclick="pick('hairmakeup', this)">platinum buzzcut with black roots showing, oil sheen and streak of blood near temple</li>
  <li onclick="pick('hairmakeup', this)">short asymmetrical bob, dyed copper and uneven, mascara bleeding in the rain</li>
  <li onclick="pick('hairmakeup', this)">slicked-back chrome hair reflecting red neon, lips cracked and dusted with ash</li>
  <li onclick="pick('hairmakeup', this)">jet-black hair in a loose braid, sweat and soot clinging to strands</li>
  <li onclick="pick('hairmakeup', this)">shaved head with intricate tattoo patterns, dark eyeliner smudged under eyes</li>
  <li onclick="pick('hairmakeup', this)">long silver hair tangled with wires, lips painted deep crimson, chipped from biting</li>
  <li onclick="pick('hairmakeup', this)">short spiky hair dyed electric blue, smudged black lipstick and dirt-streaked cheeks</li>
  <li onclick="pick('hairmakeup', this)">messy pixie cut with neon pink highlights, dark circles under eyes, faint scar on eyebrow</li>
  <li onclick="pick('hairmakeup', this)">long dreadlocks tied back with strips of cloth, lips bare and cracked</li>
  <li onclick="pick('hairmakeup', this)">asymmetrical cut with shaved side, hair dyed deep purple, eyeliner smudged from sweat</li>
  <li onclick="pick('hairmakeup', this)">short platinum hair with undercut, dark lipstick smeared from a scuffle</li>
  <li onclick="pick('hairmakeup', this)">long wavy hair dyed midnight blue, smudged silver eyeshadow, faint bruise on cheekbone</li>
  <li onclick="pick('hairmakeup', this)">buzzed sides with long top dyed fiery red, black eyeliner running down cheeks</li>
  <li onclick="pick('hairmakeup', this)">messy bun with strands of hair falling loose, lips pale and cracked</li>
  <li onclick="pick('hairmakeup', this)">short curly hair dyed neon green, dark lipstick chipped from biting</li>
  <li onclick="pick('hairmakeup', this)">silver undercut glowing faintly with fiberoptic strands, eyeliner sharp as a blade</li>
  <li onclick="pick('hairmakeup', this)">white hair cropped short, grease smudges along cheekbones, one side burned</li>
  <li onclick="pick('hairmakeup', this)">messy shoulder-length hair, streaked violet, lipstick smeared from a fight</li>
  <li onclick="pick('hairmakeup', this)">long dark hair tied with wire, eyes lined in metallic crimson shadow</li>
  <li onclick="pick('hairmakeup', this)">half-shaved scalp with bioports visible, faint glow under skin, lips matte black</li>
  <li onclick="pick('hairmakeup', this)">bleached fringe falling over cybernetic eye, faint smear of silver glitter on cheek</li>
  <li onclick="pick('hairmakeup', this)">wet and tangled bob, dark mascara running down cheekbones, bruised lips</li>
  <li onclick="pick('hairmakeup', this)">neon blue hair pulled into topknot, eyeliner smudged from sweat and smoke</li>
  <li onclick="pick('hairmakeup', this)">shaved sides, molten copper mohawk, black lipstick chipped from biting</li>
  <li onclick="pick('hairmakeup', this)">long hair slick with rain, underlight dyed magenta, one bloodshot eye</li>
  <li onclick="pick('hairmakeup', this)">messy ponytail, cigarette burn marks on fingers, faint sparkle of holo-glitter on lips</li>
</ul>
</div>

<!-- Emotion -->
<div class="section" id="emotion">
  <h3 id="label-emotion">Emotion</h3>
  <label class="cat-toggle"><input type="checkbox" id="enable-emotion" checked onchange="updateCombinationsCount()"> include</label>
  <label class="cat-toggle"><input type="checkbox" id="lock-emotion"> üîí lock</label>
  <select id="category-emotion" onchange="loadCategory('emotion', this.value)"><option value="default">Current (Cyberpunk)</option></select>
  <input type="text" value="Emotion" oninput="updateLabel('emotion', this.value)">
<ul>
  <li onclick="pick('emotion', this)">cold defiance, lips parted slightly, eyes fixed like a blade</li>
  <li onclick="pick('emotion', this)">tired anger behind half-lidded eyes, mouth smeared with rain and blood</li>
  <li onclick="pick('emotion', this)">bitter amusement, faint smirk despite the chaos around her</li>
  <li onclick="pick('emotion', this)">defiant resilience, chin held high, eyes blazing with determination</li>
  <li onclick="pick('emotion', this)">quiet sorrow, eyes glistening with unshed tears, lips pressed tight</li>
  <li onclick="pick('emotion', this)">haunted vigilance, scanning the shadows, jaw clenched</li>
  <li onclick="pick('emotion', this)">fierce concentration, brows furrowed, lips slightly parted</li>
  <li onclick="pick('emotion', this)">weary acceptance, shoulders slumped, eyes distant yet alert</li>
  <li onclick="pick('emotion', this)">grim determination, teeth bared in a snarl, eyes locked on target</li>
  <li onclick="pick('emotion', this)">silent grief, tears mingling with rain, expression stoic</li>
  <li onclick="pick('emotion', this)">resigned fatigue, eyes half-closed, breath visible in cold air</li>
  <li onclick="pick('emotion', this)">steely resolve, jaw set, eyes burning with purpose</li>
  <li onclick="pick('emotion', this)">hollow calm, face expressionless as sparks fall past her</li>
  <li onclick="pick('emotion', this)">grim satisfaction, jaw tense, a single tear mixing with grime</li>
  <li onclick="pick('emotion', this)">feral grin through bloodied teeth, laughter swallowed by thunder</li>
  <li onclick="pick('emotion', this)">numb detachment, blank stare illuminated by neon reflection</li>
  <li onclick="pick('emotion', this)">slow-burn fury rising behind clenched teeth and dark circles</li>
  <li onclick="pick('emotion', this)">unsteady breath, eyes wide and glassy, haunted by what she's seen</li>
  <li onclick="pick('emotion', this)">weary focus, lips trembling but steady aim in her gaze</li>
  <li onclick="pick('emotion', this)">shattered but unbroken, tears invisible in the downpour</li>
  <li onclick="pick('emotion', this)">apathetic defiance, shoulders relaxed, danger unacknowledged</li>
  <li onclick="pick('emotion', this)">haunted curiosity, eyes tracking something just out of frame</li>
  <li onclick="pick('emotion', this)">subtle despair hidden under a professional stillness</li>
  <li onclick="pick('emotion', this)">calm transcendence, face lit by chaos like holy fire</li>
</ul>
</div>
</div>
<div class="footer">
  <div class="footer-input-group">
    <label for="basePrompt">Base Prompt:</label>
    <input type="text" id="basePrompt" value="1girl, solo" oninput="update()">
  </div>
  <div class="footer-input-group">
    <label for="qualityTags">Quality Tags:</label>
    <input type="text" id="qualityTags" value="8K, ultra-textural, highly detailed, cinematic lighting, masterpiece" oninput="update()">
  </div>
  <div class="combinations-display">
    <span class="label">üé∞ Possible Combinations:</span>
    <span class="count" id="combinationsCount">0</span>
  </div>
  
  <!-- Preset Management Controls -->
  <div class="preset-controls">
    <button onclick="saveAsDefault()">üíæ Save as Default</button>
    <button onclick="loadDefault()">üìÇ Load Default</button>
    <button onclick="saveNamedPreset()">‚≠ê Save Named Preset</button>
    <label for="presetSelector">Load Preset:</label>
    <select id="presetSelector" onchange="loadSelectedPreset()">
      <option value="">-- Select Preset --</option>
    </select>
    <button class="btn--danger" onclick="deleteSelectedPreset()">üóëÔ∏è Delete</button>
  </div>
  
  <textarea id="promptBox" placeholder="Your prompt will appear here..." readonly></textarea>
  <div class="button-group">
    <button id="randBtn" onclick="randomize()">üé≤ Randomize</button>
    <button id="copyBtn" onclick="copyPrompt()">üìã Copy Prompt</button>
    <button id="batchBtn" onclick="showBatchDialog()">üì¶ Batch Generate</button>
  </div>
</div>

<script>
  const sel = {
    bodytype: '',
    scene: '',
    outfit: '',
    visualfx: '',
    artreference: '',
    setting: '',
    mood: '',
    accessories: '',
    hairmakeup: '',
    emotion: ''
  };
  const settingOrder = [
    'bodytype',
    'scene',
    'outfit',
    'visualfx',
    'artreference',
    'setting',
    'mood',
    'accessories',
    'hairmakeup',
    'emotion'
  ];

  function updateLabel(section, value) {
    document.getElementById('label-'+section).textContent = value || section;
  }

  // Dynamic Category System
  let availableCategories = [];

  // Fetch available category files from server
  async function loadAvailableCategories() {
    try {
      const response = await fetch('categories/');
      if (response.ok) {
        const html = await response.text();
        // Extract CSV filenames from directory listing
        const csvFiles = html.match(/cat_[^"]*\.csv/g) || [];
        // Remove duplicates and convert to category names
        availableCategories = [...new Set(csvFiles.map(file => file.replace('.csv', '')))];
        console.log('Available categories:', availableCategories);
        populateAllDropdowns();
      }
    } catch (error) {
      console.log('Could not auto-detect categories, using fallback list');
      // Fallback list of known categories
      availableCategories = [
        'cat_bodytype_default', 'cat_bodytype_fantasy', 'cat_bodytype_scifi',
        'cat_scene_cyberpunk', 'cat_scene_fantasy', 'cat_scene_horror',
        'cat_outfit_fantasy', 'cat_visualfx_fantasy', 'cat_emotion_positive'
      ];
      populateAllDropdowns();
    }
  }

  // Populate all category dropdowns with available files
  function populateAllDropdowns() {
    const categorySelects = document.querySelectorAll('select[id^="category-"]');
    
    categorySelects.forEach(select => {
      // Keep the current option
      const currentValue = select.value;
      
      // Clear existing options except "default"
      select.innerHTML = '<option value="default">Current (Default)</option>';
      
      // Add all available categories to every dropdown
      availableCategories.forEach(catFile => {
        const parts = catFile.split('_');
        if (parts.length >= 3) {
          const attribute = parts[1];
          // Capture everything from the third part onward
          const focus = parts.slice(2).join(' ');
          const displayName = `${attribute.charAt(0).toUpperCase() + attribute.slice(1)} - ${focus.charAt(0).toUpperCase() + focus.slice(1)}`;
          
          const option = document.createElement('option');
          option.value = catFile;
          option.textContent = displayName;
          select.appendChild(option);
        }
      });
      
      // Restore previous selection if it still exists
      if (currentValue && currentValue !== 'default') {
        select.value = currentValue;
      }
    });
  }

  // CSV Loading Functions
  async function loadCategory(categoryId, csvFile) {
    if (csvFile === 'default') {
      return; // Keep current content
    }
    
    try {
      console.log(`Attempting to load: categories/${csvFile}.csv`);
      const response = await fetch(`categories/${csvFile}.csv`);
      
      if (!response.ok) {
        console.error(`HTTP Error: ${response.status} - ${response.statusText}`);
        alert(`Could not load category file: ${csvFile}.csv\nError: ${response.status} - ${response.statusText}\n\nTip: You may need to run this from a local server (like Live Server extension) instead of opening the HTML file directly.`);
        return;
      }
      
      const csvText = await response.text();
      console.log(`CSV loaded successfully:`, csvText.substring(0, 100) + '...');
      
      const items = parseCSV(csvText);
      console.log(`Parsed ${items.length} items:`, items);
      
      if (items.length === 0) {
        alert(`No items found in ${csvFile}.csv. Please check the file format.`);
        return;
      }
      
      updateCategoryItems(categoryId, items);
      
      // Clear current selection for this category
      sel[categoryId] = '';
      document.querySelectorAll('#'+categoryId+' li').forEach(li => {
        li.classList.remove('selected');
      });
      update();
      
      alert(`Successfully loaded ${items.length} items from ${csvFile}.csv`);
      
    } catch (error) {
      console.error('Error loading category:', error);
      
      if (error.message.includes('Failed to fetch')) {
        alert(`Cannot load CSV files when opening HTML directly in browser.\n\nüîß SOLUTIONS:\n1. Use VS Code Live Server extension\n2. Use Python: python -m http.server 8000\n3. Use Node.js: npx http-server\n\nThen open: http://localhost:8000`);
      } else {
        alert(`Error loading category: ${error.message}`);
      }
    }
  }
  
  function parseCSV(csvText) {
    const lines = csvText.split('\n');
    const items = [];
    
    console.log(`Parsing CSV with ${lines.length} lines`);
    
    // Skip header row (first line should be "prompt_piece")
    for (let i = 1; i < lines.length; i++) {
      const line = lines[i].trim();
      if (line && line !== '') {
        // Remove outer quotes if present
        let item = line;
        if (item.startsWith('"') && item.endsWith('"')) {
          item = item.slice(1, -1);
        }
        
        // Skip empty items
        if (item && item.trim() !== '') {
          items.push(item.trim());
        }
      }
    }
    
    console.log(`Parsed ${items.length} valid items`);
    return items;
  }
  
  function updateCategoryItems(categoryId, items) {
    const ul = document.querySelector(`#${categoryId} ul`);
    if (!ul) return;
    
    // Clear existing items
    ul.innerHTML = '';
    
    // Add new items
    items.forEach(item => {
      const li = document.createElement('li');
      li.textContent = item;
      li.onclick = function() { pick(categoryId, this); };
      ul.appendChild(li);
    });
    
    // Update combinations counter after loading new items
    updateCombinationsCount();
  }

  function pick(sec, el) {
    document.querySelectorAll('#'+sec+' li').forEach(li => {
      li.classList.remove('selected');
    });
    el.classList.add('selected');
    sel[sec] = el.textContent.trim();
    update();
  }



  function update() {
    const parts = [];
    
    // Get base prompt from input box
    const basePrompt = document.getElementById('basePrompt').value.trim();
    if (basePrompt) {
      parts.push(basePrompt);
    }
    
    settingOrder.forEach(sec => {
      if (document.getElementById('enable-' + sec).checked && sel[sec]) {
        parts.push(sel[sec]);
      }
    });
    const core = parts.join(', ');
    
    // Get quality tags from input box and append
    const qualityTags = document.getElementById('qualityTags').value.trim();
    const finalPrompt = qualityTags ? core + ', ' + qualityTags : core;
    
    document.getElementById('promptBox').value = finalPrompt;
    
    // Update combinations counter
    updateCombinationsCount();
  }

  function updateCombinationsCount() {
    let totalCombinations = 1;
    
    settingOrder.forEach(sec => {
      // Only count enabled categories
      if (document.getElementById('enable-' + sec).checked) {
        // Get all visible items for this category
        const allItems = Array.from(document.querySelectorAll('#'+sec+' li'));
        const visibleItems = allItems.filter(li => li.style.display !== 'none');
        const count = visibleItems.length;
        
        if (count > 0) {
          totalCombinations *= count;
        }
      }
    });
    
    // Format large numbers with commas for readability
    const formattedCount = totalCombinations.toLocaleString();
    document.getElementById('combinationsCount').textContent = formattedCount;
  }

  function copyPrompt() {
    const box = document.getElementById('promptBox');
    box.select();
    document.execCommand('copy');
    alert('Prompt copied!');
  }

  function showBatchDialog() {
    const count = prompt('How many prompts would you like to generate?', '10');
    if (count && !isNaN(count) && parseInt(count) > 0) {
      generateBatchPrompts(parseInt(count));
    }
  }

  function generateBatchPrompts(count) {
    const prompts = [];
    
    // Store current selections to restore later
    const currentSelections = {...sel};
    
    for (let i = 0; i < count; i++) {
      // Generate a random prompt
      randomizeForBatch();
      
      // Get the generated prompt
      const parts = [];
      
      // Get base prompt from input box
      const basePrompt = document.getElementById('basePrompt').value.trim();
      if (basePrompt) {
        parts.push(basePrompt);
      }
      
      settingOrder.forEach(sec => {
        if (document.getElementById('enable-' + sec).checked && sel[sec]) {
          parts.push(sel[sec]);
        }
      });
      
      const core = parts.join(', ');
      // Get quality tags from input box and append
      const qualityTags = document.getElementById('qualityTags').value.trim();
      const finalPrompt = qualityTags ? core + ', ' + qualityTags : core;
      
      if (finalPrompt) {
        prompts.push(finalPrompt);
      }
    }
    
    // Restore original selections
    Object.assign(sel, currentSelections);
    update();
    
    // Download the prompts as a text file
    downloadPrompts(prompts);
  }

  function randomizeForBatch() {
    settingOrder.forEach(sec => {
      if (!document.getElementById('enable-' + sec).checked) {
        sel[sec] = '';
        return;
      }
      
      // Skip if category is locked during batch generation
      const lockCheckbox = document.getElementById('lock-' + sec);
      if (lockCheckbox && lockCheckbox.checked) {
        return; // Keep current selection, don't randomize
      }
      
      // Get all visible items for this section
      const allItems = Array.from(document.querySelectorAll('#'+sec+' li'));
      const visibleItems = allItems.filter(li => li.style.display !== 'none');
      
      if (visibleItems.length > 0) {
        const choice = visibleItems[Math.floor(Math.random() * visibleItems.length)];
        if (choice) {
          sel[sec] = choice.textContent.trim();
        }
      } else {
        sel[sec] = '';
      }
    });
  }

  function downloadPrompts(prompts) {
    // Filter out empty prompts and trim whitespace
    const cleanPrompts = prompts.filter(prompt => prompt && prompt.trim().length > 0).map(prompt => prompt.trim());
    const content = cleanPrompts.join('\n');
    const blob = new Blob([content], { type: 'text/plain' });
    const url = window.URL.createObjectURL(blob);
    const a = document.createElement('a');
    const timestamp = new Date().toISOString().replace(/[:.]/g, '-').slice(0, -5);
    a.href = url;
    a.download = `cyberpunk_prompts_${timestamp}.txt`;
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);
    window.URL.revokeObjectURL(url);
    alert(`${cleanPrompts.length} prompts have been saved to cyberpunk_prompts_${timestamp}.txt`);
  }

  function randomize() {
    settingOrder.forEach(sec => {
      // Skip if category is disabled
      if (!document.getElementById('enable-' + sec).checked) {
        sel[sec] = '';
        document.querySelectorAll('#'+sec+' li').forEach(li => {
          li.classList.remove('selected');
        });
        return;
      }
      
      // Skip if category is locked
      const lockCheckbox = document.getElementById('lock-' + sec);
      if (lockCheckbox && lockCheckbox.checked) {
        return; // Keep current selection, don't randomize
      }
      
      // Get all visible items for this section
      const allItems = Array.from(document.querySelectorAll('#'+sec+' li'));
      const visibleItems = allItems.filter(li => li.style.display !== 'none');
      
      if (visibleItems.length > 0) {
        const choice = visibleItems[Math.floor(Math.random() * visibleItems.length)];
        if (choice) pick(sec, choice);
      } else {
        sel[sec] = '';
        document.querySelectorAll('#'+sec+' li').forEach(li => {
          li.classList.remove('selected');
        });
      }
    });
    update();
  }

  // ===== PRESET MANAGEMENT FUNCTIONS =====
  
  function getCurrentState() {
    const state = {
      categories: {},
      basePrompt: document.getElementById('basePrompt').value,
      qualityTags: document.getElementById('qualityTags').value,
      selections: {...sel}
    };
    
    // Save each category's dropdown value and enable/lock states
    settingOrder.forEach(sec => {
      const dropdown = document.getElementById(`category-${sec}`);
      const enableCheckbox = document.getElementById(`enable-${sec}`);
      const lockCheckbox = document.getElementById(`lock-${sec}`);
      
      state.categories[sec] = {
        categoryFile: dropdown ? dropdown.value : 'default',
        enabled: enableCheckbox ? enableCheckbox.checked : true,
        locked: lockCheckbox ? lockCheckbox.checked : false
      };
    });
    
    return state;
  }
  
  function applyState(state) {
    if (!state) {
      alert('No preset data found!');
      return;
    }
    
    // Restore base prompt and quality tags
    if (state.basePrompt !== undefined) {
      document.getElementById('basePrompt').value = state.basePrompt;
    }
    if (state.qualityTags !== undefined) {
      document.getElementById('qualityTags').value = state.qualityTags;
    }
    
    // Restore category settings
    settingOrder.forEach(sec => {
      if (state.categories && state.categories[sec]) {
        const catState = state.categories[sec];
        
        // Restore dropdown selection
        const dropdown = document.getElementById(`category-${sec}`);
        if (dropdown && catState.categoryFile) {
          dropdown.value = catState.categoryFile;
          // Trigger load if not default
          if (catState.categoryFile !== 'default') {
            loadCategory(sec, catState.categoryFile);
          }
        }
        
        // Restore enable/lock states
        const enableCheckbox = document.getElementById(`enable-${sec}`);
        if (enableCheckbox) {
          enableCheckbox.checked = catState.enabled !== undefined ? catState.enabled : true;
        }
        
        const lockCheckbox = document.getElementById(`lock-${sec}`);
        if (lockCheckbox) {
          lockCheckbox.checked = catState.locked !== undefined ? catState.locked : false;
        }
      }
    });
    
    // Restore selections if available
    if (state.selections) {
      Object.assign(sel, state.selections);
      
      // Update visual selection for each category
      settingOrder.forEach(sec => {
        if (sel[sec]) {
          const items = document.querySelectorAll(`#${sec} li`);
          items.forEach(li => {
            if (li.textContent.trim() === sel[sec]) {
              li.classList.add('selected');
            } else {
              li.classList.remove('selected');
            }
          });
        }
      });
    }
    
    update();
    updateCombinationsCount();
  }
  
  function saveAsDefault() {
    const state = getCurrentState();
    localStorage.setItem('promptBuilder_defaultPreset', JSON.stringify(state));
    alert('‚úÖ Default preset saved successfully!');
  }
  
  function loadDefault() {
    const savedState = localStorage.getItem('promptBuilder_defaultPreset');
    if (!savedState) {
      alert('No default preset found. Save one first!');
      return;
    }
    
    const state = JSON.parse(savedState);
    applyState(state);
    alert('‚úÖ Default preset loaded!');
  }
  
  function saveNamedPreset() {
    const name = prompt('Enter a name for this preset:');
    if (!name || name.trim() === '') {
      return;
    }
    
    const state = getCurrentState();
    
    // Get existing presets
    const presetsJSON = localStorage.getItem('promptBuilder_namedPresets');
    const presets = presetsJSON ? JSON.parse(presetsJSON) : {};
    
    // Add new preset
    presets[name.trim()] = state;
    
    // Save back to localStorage
    localStorage.setItem('promptBuilder_namedPresets', JSON.stringify(presets));
    
    // Refresh the dropdown
    populatePresetDropdown();
    
    alert(`‚úÖ Preset "${name.trim()}" saved successfully!`);
  }
  
  function loadSelectedPreset() {
    const selector = document.getElementById('presetSelector');
    const presetName = selector.value;
    
    if (!presetName) {
      return;
    }
    
    const presetsJSON = localStorage.getItem('promptBuilder_namedPresets');
    if (!presetsJSON) {
      alert('No presets found!');
      return;
    }
    
    const presets = JSON.parse(presetsJSON);
    const state = presets[presetName];
    
    if (state) {
      applyState(state);
      alert(`‚úÖ Preset "${presetName}" loaded!`);
    } else {
      alert('Preset not found!');
    }
  }
  
  function deleteSelectedPreset() {
    const selector = document.getElementById('presetSelector');
    const presetName = selector.value;
    
    if (!presetName) {
      alert('Please select a preset to delete');
      return;
    }
    
    if (!confirm(`Are you sure you want to delete preset "${presetName}"?`)) {
      return;
    }
    
    const presetsJSON = localStorage.getItem('promptBuilder_namedPresets');
    if (!presetsJSON) {
      return;
    }
    
    const presets = JSON.parse(presetsJSON);
    delete presets[presetName];
    
    localStorage.setItem('promptBuilder_namedPresets', JSON.stringify(presets));
    
    // Reset selector and refresh dropdown
    selector.value = '';
    populatePresetDropdown();
    
    alert(`‚úÖ Preset "${presetName}" deleted!`);
  }
  
  function populatePresetDropdown() {
    const selector = document.getElementById('presetSelector');
    const currentValue = selector.value;
    
    // Clear existing options except the first one
    selector.innerHTML = '<option value="">-- Select Preset --</option>';
    
    const presetsJSON = localStorage.getItem('promptBuilder_namedPresets');
    if (!presetsJSON) {
      return;
    }
    
    const presets = JSON.parse(presetsJSON);
    const presetNames = Object.keys(presets).sort();
    
    presetNames.forEach(name => {
      const option = document.createElement('option');
      option.value = name;
      option.textContent = name;
      selector.appendChild(option);
    });
    
    // Restore previous selection if it still exists
    if (currentValue && presetNames.includes(currentValue)) {
      selector.value = currentValue;
    }
  }
  
  // ===== END PRESET MANAGEMENT =====

  document.addEventListener('DOMContentLoaded', () => {
    // Initialize the modular system
    console.log('Modular Prompt Generator initialized');
    // Load available categories and populate dropdowns
    loadAvailableCategories();
    // Initialize the combinations counter
    updateCombinationsCount();
    // Populate preset dropdown
    populatePresetDropdown();
  });
</script>

</body>
</html>
